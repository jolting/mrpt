language: c

env:
  global:
    - CCACHE_SLOPPINESS=pch_defines,time_macros

matrix:
  include:
  - compiler: gcc
    env: TASK="build" DEPS="full"
  - compiler: gcc
    env: TASK="test" DEPS="full"
  - compiler: gcc
    env: TASK="build" DEPS="headless"
  - compiler: gcc
    env: TASK="test" DEPS="headless"
  - compiler: gcc
    env: TASK="build" DEPS="minimal"
  - compiler: gcc
    env: TASK="test" DEPS="minimal"
  - compiler: clang
    env: TASK="build" DEPS="full"
  - compiler: clang
    env: TASK="test" DEPS="full"

build:
  pre_ci_boot:
    image_name: mrpt/mrpt-build-env
    image_tag: $DEPS
  ci:
    - bash travis/travis_main.sh

#after_success:
# - if [ "$BUILD_TYPE" == "Coverage" ]; then bash scripts/coveralls_submit.sh ; fi
